(function(){"use strict";var t={4643:function(t,s,e){var a=e(9242),n=e(3396);const o={class:"app"},r={key:0};function i(t,s,e,a,i,c){const d=(0,n.up)("appHeader"),u=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("section",o,[(0,n.Wm)(d),(0,n.Wm)(u),c.isLoading?((0,n.wg)(),(0,n.iD)("section",r,"loading...")):(0,n.kq)("",!0)])}const c={class:"app-header"},d=(0,n._)("span",{class:"app-header__logo"},"logo",-1),u={class:"app-header__nav"},k=(0,n.Uk)("Task App"),l=(0,n.Uk)("About");function p(t,s,e,a,o,r){const i=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("header",c,[d,(0,n._)("nav",u,[(0,n.Wm)(i,{to:"/"},{default:(0,n.w5)((()=>[k])),_:1}),(0,n.Wm)(i,{to:"/about"},{default:(0,n.w5)((()=>[l])),_:1})])])}var h={components:{},data(){return{}},created(){},methods:{},computed:{}},m=e(89);const f=(0,m.Z)(h,[["render",p]]);var v=f,g={created(){},components:{appHeader:v},computed:{isLoading(){return this.$store.getters.isLoading}}};const y=(0,m.Z)(g,[["render",i]]);var T=y,w=e(2483);function b(t,s,e,a,o,r){const i=(0,n.up)("taskList");return(0,n.wg)(),(0,n.j4)(i,{tasks:r.tasks},null,8,["tasks"])}const _={class:"task-list"};function S(t,s,e,a,o,r){const i=(0,n.up)("taskPreview");return(0,n.wg)(),(0,n.iD)("section",_,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.tasks,(t=>((0,n.wg)(),(0,n.j4)(i,{task:t,key:t.id},null,8,["task"])))),128))])}var I=e(7139);const D={class:"task"},A={class:"task__desc"},O={class:"task__desc__title"},L={class:"task__desc__doneAt"},$={class:"task__actions"};function C(t,s,e,a,o,r){return(0,n.wg)(),(0,n.iD)("section",D,[(0,n._)("div",A,[(0,n._)("span",O,(0,I.zw)(e.task.title),1),(0,n._)("span",L,(0,I.zw)(r.doneAt),1)]),(0,n._)("div",$,[(0,n._)("button",{onClick:s[0]||(s[0]=(...t)=>r.moveToEdit&&r.moveToEdit(...t))},"edit"),(0,n._)("button",{onClick:s[1]||(s[1]=(...t)=>r.moveToDetails&&r.moveToDetails(...t))},"details")])])}var j={props:{task:Object},components:{},data(){return{}},created(){},methods:{moveToDetails(){this.$router.push(`/task/${this.task.id}`)},moveToEdit(){this.$router.push(`/task/edit/${this.task.id}`)}},computed:{doneAt(){return this.task.doneAt?new Date(this.task.doneAt).toUTCString():"not done yet"}}};const x=(0,m.Z)(j,[["render",C]]);var Z=x,z={props:{tasks:Object},components:{taskPreview:Z},data(){return{}},created(){},methods:{},computed:{}};const E=(0,m.Z)(z,[["render",S]]);var F=E,K={components:{taskList:F},data(){return{}},created(){this.$store.dispatch("loadTasks")},methods:{},computed:{tasks(){return this.$store.getters.tasks}}};const M=(0,m.Z)(K,[["render",b]]);var B=M;function H(t,s,e,a,n,o){return" about "}var U={components:{},data(){return{}},created(){},methods:{},computed:{}};const J=(0,m.Z)(U,[["render",H]]);var N=J;function P(t,s,e,a,o,r){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("button",{onClick:s[0]||(s[0]=(...t)=>r.back&&r.back(...t))},"back"),(0,n._)("pre",null,(0,I.zw)(o.task),1)],64)}var W={components:{},data(){return{taskId:0,task:{}}},created(){this.taskId=this.$route.params.taskId,this.loadTask()},methods:{back(){this.$router.push("/")},async loadTask(){this.task=await this.$store.dispatch({type:"getTaskById",id:this.taskId})}},computed:{}};const q=(0,m.Z)(W,[["render",P]]);var Y=q;const V=(0,n._)("label",{for:"title"}," Title ",-1),G=(0,n._)("label",{for:"isDone"}," is done ? ",-1),Q=(0,n._)("button",{type:"submit"},"save",-1);function R(t,s,e,o,r,i){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("section",null,"task edit id: "+(0,I.zw)(r.taskId),1),(0,n._)("form",{onSubmit:s[2]||(s[2]=(0,a.iM)(((...t)=>i.saveForm&&i.saveForm(...t)),["prevent"]))},[V,(0,n.wy)((0,n._)("input",{type:"text",id:"title","onUpdate:modelValue":s[0]||(s[0]=t=>r.task.title=t)},null,512),[[a.nr,r.task.title]]),G,(0,n.wy)((0,n._)("input",{type:"checkbox",id:"isDone","onUpdate:modelValue":s[1]||(s[1]=t=>r.isDone=t)},null,512),[[a.e8,r.isDone]]),Q],32),(0,n._)("button",{onClick:s[3]||(s[3]=(...t)=>i.back&&i.back(...t))},"back"),(0,n._)("pre",null,(0,I.zw)(r.task),1),(0,n._)("pre",null,"isDone "+(0,I.zw)(r.isDone),1)],64)}var X={components:{},data(){return{taskId:0,task:{},title:null,isDone:!1}},created(){this.taskId=this.$route.params.taskId,this.loadTask()},methods:{back(){this.$router.push("/")},async loadTask(){this.task=await this.$store.dispatch({type:"getTaskById",id:this.taskId}),this.task.doneAt&&(this.isDone=!0)},async saveForm(){!!this.task.doneAt!==this.isDone&&(this.task.doneAt=this.isDone?Date.now():null),await this.$store.dispatch({type:"saveTask",taskToSave:this.task}),this.back()}},computed:{}};const tt=(0,m.Z)(X,[["render",R]]);var st=tt;const et=[{path:"/",name:"home",component:B},{path:"/about",name:"about",component:N},{path:"/task/:taskId",name:"details",component:Y},{path:"/task/edit/:taskId",name:"edit",component:st}],at=(0,w.p7)({history:(0,w.r5)(),routes:et});var nt=at,ot=e(65);const rt={saveToStorage:it,loadFromStorage:ct};function it(t,s){const e=JSON.stringify(s);localStorage.setItem(t,e)}function ct(t){const s=localStorage.getItem(t),e=JSON.parse(s);return e}const dt={query:ut,saveTask:kt,removeTask:lt,getTaskById:pt};async function ut(){var t=rt.loadFromStorage("TASKS");return t||(t=[{id:"sdfgh",title:"todo",doneAt:null},{id:"dfgh",title:"todo2",doneAt:1651956154}],rt.saveToStorage("TASKS",t)),t}async function kt(t){return t.id?ht(t):mt(t)}async function lt(t){const s=await ut(),e=s.findIndex((s=>s.id===t));s.splice(e,1),rt.saveToStorage("TASKS",s)}async function pt(t){const s=await ut();return s.find((s=>s.id===t))}async function ht(t){const s=await ut(),e=s.findIndex((s=>s.id===t.id));return s.splice(e,1,t),rt.saveToStorage("TASKS",s),t}async function mt(t){t.id=ft();const s=ut();return s.push(t),rt.saveToStorage("TASKS",s),t}function ft(t=5){for(var s="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<t;a++)s+=e.charAt(Math.floor(Math.random()*e.length));return s}var vt={state:{tasks:[]},getters:{tasks(t){return JSON.parse(JSON.stringify(t.tasks))}},mutations:{setTasks(t,{tasks:s}){t.tasks=s},addTask(t,{task:s}){t.tasks.push(s)},updateTask(t,{task:s}){const e=t.tasks.findIndex((t=>t.id===s.id));t.tasks.splice(e,1,s)},removeTask(t,{id:s}){const e=t.tasks.findIndex((t=>t.id===s));t.tasks.splice(e,1)}},actions:{async loadTasks({commit:t}){t({type:"setIsLoading",isLoading:!0});try{setTimeout((async()=>{const s=await dt.query({});t({type:"setTasks",tasks:s})}),1e3)}catch(s){throw console.error("Cannot Load tasks",s),s}finally{setTimeout((()=>{t({type:"setIsLoading",isLoading:!1})}),1e3)}},async getTaskById(t,{id:s}){try{return await dt.getTaskById(s)}catch(e){throw console.error("Cannot Edit/Add task",e),e}},async saveTask({commit:t},{taskToSave:s}){try{const e=await dt.saveTask(s);return s.id?t({type:"updateTask",task:e}):t({type:"addTask",task:e}),e}catch(e){throw console.error("Cannot Edit/Add task",e),e}},async removeTask({commit:t},{id:s}){try{await dt.removeTask(s),t({type:"removeTask",id:s})}catch(e){throw console.error("Cannot remove task",e),e}}}};const gt=(0,ot.MT)({strict:!0,state:{isLoading:!1},getters:{isLoading(t){return t.isLoading}},mutations:{setIsLoading(t,{isLoading:s}){t.isLoading=s}},actions:{},modules:{taskModules:vt}});var yt=gt;(0,a.ri)(T).use(nt).use(yt).mount("#app")}},s={};function e(a){var n=s[a];if(void 0!==n)return n.exports;var o=s[a]={exports:{}};return t[a](o,o.exports,e),o.exports}e.m=t,function(){var t=[];e.O=function(s,a,n,o){if(!a){var r=1/0;for(u=0;u<t.length;u++){a=t[u][0],n=t[u][1],o=t[u][2];for(var i=!0,c=0;c<a.length;c++)(!1&o||r>=o)&&Object.keys(e.O).every((function(t){return e.O[t](a[c])}))?a.splice(c--,1):(i=!1,o<r&&(r=o));if(i){t.splice(u--,1);var d=n();void 0!==d&&(s=d)}}return s}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[a,n,o]}}(),function(){e.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(s,{a:s}),s}}(),function(){e.d=function(t,s){for(var a in s)e.o(s,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:s[a]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){var t={143:0};e.O.j=function(s){return 0===t[s]};var s=function(s,a){var n,o,r=a[0],i=a[1],c=a[2],d=0;if(r.some((function(s){return 0!==t[s]}))){for(n in i)e.o(i,n)&&(e.m[n]=i[n]);if(c)var u=c(e)}for(s&&s(a);d<r.length;d++)o=r[d],e.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return e.O(u)},a=self["webpackChunkstarter"]=self["webpackChunkstarter"]||[];a.forEach(s.bind(null,0)),a.push=s.bind(null,a.push.bind(a))}();var a=e.O(void 0,[998],(function(){return e(4643)}));a=e.O(a)})();
//# sourceMappingURL=app.29a5a92b.js.map